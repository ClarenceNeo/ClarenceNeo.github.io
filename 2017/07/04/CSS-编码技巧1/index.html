<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> CSS 编码技巧（一） · Clarence</title><meta name="description" content="CSS 编码技巧（一） - Clarence Neo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Clarence"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/clarenceneo" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/ClarenceNeo" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">CSS 编码技巧（一）</h1><div class="post-info">Jul 4, 2017</div><div class="post-content"><p><img src="http://oeryvxt85.bkt.clouddn.com/2017-07-03-code.jpeg" alt=""></p>
<p>在软件开发中，应尽量保持代码的整洁与可维护性。在 CSS 中我们要做到的是尽量减少改动时要编辑的代码。<br><a id="more"></a></p>
<h2 id="减少重复性代码"><a href="#减少重复性代码" class="headerlink" title="减少重复性代码"></a>减少重复性代码</h2><p>比如下面这段代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">16px</span>;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#446d88</span>;</div><div class="line">  <span class="attribute">background</span>: <span class="number">#58a</span> <span class="built_in">linear-gradient</span>(#77a0bb, #58a);</div><div class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</div><div class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> gray;</div><div class="line">  <span class="attribute">color</span>: white;</div><div class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> -<span class="number">1px</span> <span class="number">1px</span> <span class="number">#335166</span>;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="font-尺寸更改"><a href="#font-尺寸更改" class="headerlink" title="font 尺寸更改"></a>font 尺寸更改</h4><p>这里字号与行高都是固定的值，以为这是一个按钮，我们可以把文字内容跟容器大小建立关系，所以当某些值相互依赖时，应该把它们的相互关系用代码表达出来，这里行高是字号的 1.5 倍，所以我们可以做如下修改：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>之后我们会想为什么还把字号定为绝对长度值呢？如果改用百分比或 em 单位是不是更好些。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">125%</span>; <span class="comment">/* 假设父级的字号是 16px */</span></div><div class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在，如果我们改变父级的字号，按钮的尺寸就会随之变化。</p>
<h4 id="使用-em-建立相关性"><a href="#使用-em-建立相关性" class="headerlink" title="使用 em 建立相关性"></a>使用 em 建立相关性</h4><p>因为所有其他效果都是为一个小按钮设计的，并没有跟着缩放。如果我们把这些长度值都改成 em 单位，那这些效果 的值就都变成可缩放的了，而且是依赖字号进行缩放。如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">padding</span>: .<span class="number">3em</span> .<span class="number">8em</span>;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#446d88</span>;</div><div class="line">  <span class="attribute">background</span>: <span class="number">#58a</span> <span class="built_in">linear-gradient</span>(#77a0bb, #58a);</div><div class="line">  <span class="attribute">border-radius</span>: .<span class="number">2em</span>;</div><div class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> .<span class="number">05em</span> .<span class="number">25em</span> gray;</div><div class="line">  <span class="attribute">color</span>: white;</div><div class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> -.<span class="number">05em</span> .<span class="number">05em</span> <span class="number">#335166</span>;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">125%</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>这里我们希望字号和其他尺寸能够跟父级的字号建立关联，因此采用了 em 单位。但在某些 情况下，你可能希望这些尺寸是和根级字号（即 &lt;html&gt; 元素的字号）相关联的，此时使用 em 可能会导致复杂的计算。在这种情况下，你可以使用 rem 单位。在 CSS 中，相关性是一 个很重要的特性，但你得想清楚到底哪些东西是真正相关的。</p>
</blockquote>
<h4 id="color-属性"><a href="#color-属性" class="headerlink" title="color 属性"></a>color 属性</h4><p>假设我们要创建一个红色的取消按钮，或者一个绿色的确定按钮，该怎么做呢？</p>
<p>我们可能需要覆盖四条声明（ <code>border-color</code> 、 <code>background</code> 、 <code>box-shadow</code> 和 <code>text-shadow</code> ），以及设置亮色和暗色版本。</p>
<p>其实只要把半透明的黑色或白色叠加在主色调上，即可产生主色调的亮色和暗色变体，这样就能简单地化解这个难题了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">button</span> &#123;</div><div class="line">  <span class="attribute">padding</span>: .<span class="number">3em</span> .<span class="number">8em</span>;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(0, 0, 0, .1);</div><div class="line">  <span class="attribute">background</span>: <span class="number">#58a</span> <span class="built_in">linear-gradient</span>(hsla(0, 0%, 100%, .2), transparent);</div><div class="line">  <span class="attribute">border-radius</span>: .<span class="number">2em</span>;</div><div class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> .<span class="number">05em</span> .<span class="number">25em</span> <span class="built_in">rgba</span>(0, 0, 0, .5);</div><div class="line">  <span class="attribute">color</span>: white;</div><div class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> -.<span class="number">05em</span> .<span class="number">05em</span> <span class="built_in">rgba</span>(0, 0, 0, .5);</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">125%</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在我们只要覆盖 background-color 属性，就可以得到不同颜色版本 的按钮了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">button</span><span class="selector-class">.cancel</span> &#123; <span class="attribute">background-color</span>: <span class="number">#c00</span>; &#125;</div><div class="line"><span class="selector-tag">button</span><span class="selector-class">.ok</span> &#123; <span class="attribute">background-color</span>: <span class="number">#6b0</span>;&#125;</div></pre></td></tr></table></figure>
<p>这样通过更改背景颜色我们就可以获得不同颜色的按钮了。</p>
<h4 id="其它情况"><a href="#其它情况" class="headerlink" title="其它情况"></a>其它情况</h4><p><strong>1.代码易维护 vs 代码量少</strong></p>
<p>有时候，代码易维护和代码量少不可兼得。比如，我们要为一个元素添加一道 10px 宽的边框，但左侧不加边框。</p>
<p><code>border-width: 10px 10px 10px 0;</code></p>
<p>只要这一条声明就可以搞定了，但如果日后要改动边框的宽度，你需要 同时改三个地方。如果把它拆成两条声明的话，改起来就容易多了，而且可读性或许更好一些：</p>
<p><code>border-width: 10px;</code><br><code>border-left-width: 0;</code></p>
<p><strong>2.currentColor</strong></p>
<p>这个特性让它成为了 CSS 中有史以来的第一个变量，举个例子，假设我们想让所有的水平分割线（所有 <hr> 元素）自动与 文本的颜色保持一致。有了 currentColor 之后，我们只需要这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">hr</span> &#123;</div><div class="line">  <span class="attribute">height</span>: .<span class="number">5em</span>; </div><div class="line">  <span class="attribute">background</span>: currentColor;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>3.继承</strong></p>
<p>inherit 可以用在任何 CSS 属性中， 而且它总是绑定到父元素的计 算值（对伪元素来说，则会取生成该伪元素的宿主元素）。举例来说，要把 表单元素的字体设定为与页面的其他部分相同，你并不需要重复指定字体属 性，只需利用 inherit 的特性即可：</p>
<p><code>input, select, button { font: inherit; }</code></p>
<p>与此类似，要把超链接的颜色设定为与页面中其他文本相同，还是要用 inherit ：</p>
<p><code>a { color: inherit; }</code></p>
<p>这个 inherit 关键字对于背景色同样非常有用。 举个例子， 在创建提 示框的时候，你可能希望它的小箭头能够自动继承背景和边框的样式,如下所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.callout</span> &#123;</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.callout</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">  <span class="attribute">position</span>: absolute;</div><div class="line">  <span class="attribute">top</span>: -.<span class="number">4em</span>;</div><div class="line">  <span class="attribute">left</span>: <span class="number">1em</span>;</div><div class="line">  <span class="attribute">padding</span>: .<span class="number">35em</span>;</div><div class="line">  <span class="attribute">background</span>: inherit;</div><div class="line">  <span class="attribute">border</span>: inherit;</div><div class="line">  <span class="attribute">border-right</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">border-bottom</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(45deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://oeryvxt85.bkt.clouddn.com/2017-07-03-Screen%20Shot%202017-07-04%20at%202.25.14%20AM.png" alt=""></p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/07/04/CSS-编码技巧2/" class="prev">上一篇</a><a href="/2017/07/03/CSS-半透明边框/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'clarenceneo';
var disqus_identifier = '2017/07/04/CSS-编码技巧1/';
var disqus_title = 'CSS 编码技巧（一）';
var disqus_url = 'http://yoursite.com/2017/07/04/CSS-编码技巧1/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//clarenceneo.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2017 <a href="http://yoursite.com">Clarence Neo</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>